/**
 * Константы с размерами узлов графа
 */

export const NODE_WIDTHS = {
  narrative: 200,
  choice: 180,
  layer: 230,
  note: 180
};

export const NODE_HEIGHTS = {
  narrative: 200, // минимальная высота
  choice: 75,
  layer: 155,
  note: 120
};

/**
 * Константы для пинов узлов
 */
export const PIN_CONSTANTS = {
  PIN_OFFSET: 5, // Отступ пина от края узла
  PIN_WIDTH: 20 // Ширина пина
};

export const HORIZONTAL_SPACING = 100;

/**
 * Константы для расчета динамической высоты узла выбора
 */
export const CHOICE_NODE_HEIGHT_CONSTANTS = {
  BASE_HEIGHT: 70, // Базовая высота для 3 строк
  LINE_HEIGHT: 18, // Примерная высота одной строки текста
  MAX_LINES: 6, // Максимальное количество строк
  MIN_LINES: 3, // Минимальное количество строк
  MAX_HEIGHT: 145, // Максимальная высота для 6 строк
  CHARS_PER_LINE: 24 // Примерное количество символов в одной строке
};

/**
 * Константа для ключа локального хранилища
 */
export const STORAGE_KEY = 'flow_data';

/**
 * Константы для позиционирования объектов при вставке и дублировании
 */
export const POSITIONING_CONSTANTS = {
  // Отступ между объектами при дублировании
  DUPLICATE_OFFSET: 30,

  // Смещение при точном совпадении координат при вставке (вниз и влево)
  COLLISION_OFFSET_X: -10,
  COLLISION_OFFSET_Y: 10,

  // Радиус проверки коллизий при вставке
  COLLISION_CHECK_RADIUS: 50,

  // Буфер для проверки коллизий при дублировании
  COLLISION_BUFFER: 20,

  // Дефолтная позиция для вставки если курсор не отслеживается
  DEFAULT_PASTE_X: 100,
  DEFAULT_PASTE_Y: 100,

  // Приоритеты направлений для размещения дублированных объектов
  DUPLICATE_DIRECTIONS: [
    {x: 1, y: 0, name: 'right'}, // Сначала вправо
    {x: -1, y: 0, name: 'left'}, // Затем влево
    {x: 0, y: 1, name: 'down'}, // Затем вниз
    {x: 0, y: -1, name: 'up'} // Затем вверх
  ],

  // Максимальное количество попыток поиска места
  MAX_PLACEMENT_ATTEMPTS: 5
};

/**
 * Константы для автоподключения связей
 */
export const AUTO_CONNECT = {
  // Общие параметры автоподключения
  CONNECT_DISTANCE: 200, // Максимальное расстояние для автоподключения
  PIN_OFFSET: 25, // Смещение пинов от края узла
  PIN_WIDTH: 20, // Ширина области пина
  PIN_OFFSET_TOP: 40, // Смещение пина по вертикали от верха узла
  THROTTLE_FACTOR: 3, // Фактор дросселирования обновлений

  // Параметры для мини-пинов слоев
  MINI_PIN_OFFSET_LEFT: 10, // Смещение мини-пинов от края слоя
  MINI_PIN_WIDTH: 12, // Ширина мини-пинов
  MINI_PIN_HEIGHT: 12, // Высота мини-пинов
  // выше три параметра задаются здесь и для стиля мини-пинов в LayerNode.module.scss и для расчета автоподключения связи
  MINI_PIN_ITEM_HEIGHT: 30 // Fallback высота элемента мини-пина (реальная высота измеряется через DOM API)
};
